<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will It Rain - Weather Prediction</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css"
    />
    <style>
      :root {
        --color-temp-max: rgba(239, 68, 68, 0.4);
        --color-temp-max-line: #ef4444;
        --color-temp-avg: rgba(251, 146, 60, 0.6);
        --color-temp-avg-line: #f97316;
        --color-temp-min: rgba(253, 224, 71, 0.7);
        --color-temp-min-line: #facc15;

        --color-wind-max: rgba(96, 165, 250, 0.4);
        --color-wind-max-line: #60a5fa;
        --color-wind-avg: rgba(59, 130, 246, 0.6);
        --color-wind-avg-line: #3b82f6;
        --color-wind-min: rgba(37, 99, 235, 0.7);
        --color-wind-min-line: #2563eb;

        --color-humidity-max: rgba(34, 197, 94, 0.4);
        --color-humidity-max-line: #22c55e;
        --color-humidity-avg: rgba(22, 163, 74, 0.6);
        --color-humidity-avg-line: #16a34a;
        --color-humidity-min: rgba(21, 128, 61, 0.7);
        --color-humidity-min-line: #15803d;

        --color-precip-max: rgba(139, 92, 246, 0.4);
        --color-precip-max-line: #8b5cf6;
        --color-precip-avg: rgba(124, 58, 237, 0.6);
        --color-precip-avg-line: #7c3aed;
        --color-precip-min: rgba(109, 40, 217, 0.7);
        --color-precip-min-line: #6d28d9;

        --color-uv-max: rgba(236, 72, 153, 0.4);
        --color-uv-max-line: #ec4899;
        --color-uv-avg: rgba(219, 39, 119, 0.6);
        --color-uv-avg-line: #db2777;
        --color-uv-min: rgba(190, 24, 93, 0.7);
        --color-uv-min-line: #be185d;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: #1a1a1a;
        color: #333;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }
      header {
        background: linear-gradient(135deg, #7dd3fc 0%, #93c5fd 100%);
        padding: 15px 30px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .logo {
        display: flex;
        flex-direction: column;
        font-weight: bold;
        color: #1e293b;
        line-height: 1.2;
      }
      .logo-will {
        font-size: 14px;
        letter-spacing: 2px;
      }
      .logo-rain {
        font-size: 16px;
        letter-spacing: 2px;
      }
      nav {
        display: flex;
        gap: 30px;
        align-items: center;
      }
      nav a {
        color: #1e293b;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s;
      }
      nav a:hover {
        color: #0f172a;
      }
      .hamburger {
        display: none;
        flex-direction: column;
        gap: 5px;
        cursor: pointer;
        padding: 10px;
      }
      .hamburger span {
        width: 25px;
        height: 3px;
        background: #1e293b;
        transition: 0.3s;
      }
      .mobile-menu {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }
      .mobile-menu.active {
        display: flex;
      }
      .mobile-menu-content {
        background: #7dd3fc;
        border-radius: 50%;
        width: 400px;
        height: 400px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 30px;
        position: relative;
      }
      .mobile-menu-close {
        position: absolute;
        top: 40px;
        right: 40px;
        font-size: 40px;
        cursor: pointer;
        color: #1e293b;
      }
      .mobile-menu a {
        color: #1e293b;
        text-decoration: none;
        font-size: 20px;
        font-weight: 500;
      }
      main {
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px 20px;
        width: 100%;
        flex-grow: 1;
      }
      .hero {
        background: linear-gradient(
          135deg,
          rgba(45, 55, 72, 0.95) 0%,
          rgba(30, 41, 59, 0.9) 100%
        );
        border-radius: 15px;
        padding: 80px 40px;
        text-align: center;
        min-height: 500px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
      }
      .hero h1 {
        font-size: 48px;
        margin-bottom: 20px;
        font-weight: bold;
      }
      .hero p {
        font-size: 20px;
        margin-bottom: 30px;
        opacity: 0.9;
      }
      .btn-primary {
        background: #7dd3fc;
        color: #1e293b;
        padding: 15px 40px;
        border: none;
        border-radius: 8px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
      }
      .btn-primary:hover {
        background: #93c5fd;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(125, 211, 252, 0.4);
      }
      .about-section {
        background: linear-gradient(135deg, #64748b 0%, #94a3b8 100%);
        border-radius: 15px;
        padding: 60px 40px;
        color: white;
      }
      .about-section h2 {
        font-size: 32px;
        margin-bottom: 20px;
      }
      .about-section p {
        font-size: 16px;
        line-height: 1.6;
        max-width: 800px;
      }
      .map-section {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin-top: 30px;
      }
      .search-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
      }
      .search-bar input {
        flex: 1;
        padding: 12px 20px;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
      }
      .search-bar button {
        padding: 12px 20px;
        background: #7dd3fc;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        color: #1e293b;
      }
      .btn-location {
        padding: 12px 20px;
        background: #34d399;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        color: white;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        gap: 8px;
        width: 100%;
        justify-content: center;
      }
      #map {
        width: 100%;
        height: 400px;
        border-radius: 10px;
        margin-bottom: 20px;
        z-index: 1;
      }
      .nasa-input-section {
        background: #f8fafc;
        padding: 25px;
        border-radius: 10px;
        margin-bottom: 20px;
      }
      .nasa-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }
      .nasa-header h3 {
        color: #1e293b;
        font-size: 20px;
      }
      .nasa-badge {
        background: linear-gradient(135deg, #7dd3fc 0%, #93c5fd 100%);
        color: #1e293b;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 11px;
        font-weight: bold;
      }
      .input-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 20px;
      }
      .input-group {
        display: flex;
        flex-direction: column;
      }
      .input-group label {
        color: #64748b;
        font-size: 12px;
        font-weight: 600;
        margin-bottom: 5px;
      }
      .input-group input {
        padding: 10px;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        font-size: 14px;
        transition: border-color 0.3s;
      }
      .input-group input:focus {
        outline: none;
        border-color: #7dd3fc;
      }
      #weatherGraphsContainer {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
        margin-top: 10px;
        margin-bottom: 20px;
      }
      .weather-graph {
        background: #fff;
        border: 1px solid #e2e8f0;
        border-radius: 8px;
        padding: 15px;
        position: relative;
        overflow: hidden;
      }
      .graph-title {
        font-size: 14px;
        font-weight: 600;
        color: #1e293b;
        margin-bottom: 10px;
      }
      .chart-svg {
        width: 100%;
        height: 160px;
        font-size: 10px;
      }
      .grid-line {
        stroke: #f1f5f9;
        stroke-width: 1;
      }
      .axis-label {
        fill: #94a3b8;
        font-weight: 500;
      }
      .area-path {
        stroke: none;
        opacity: 0.8;
      }
      .line-path {
        stroke-width: 2;
        fill: none;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .tracker-line {
        stroke: #94a3b8;
        stroke-width: 1;
        stroke-dasharray: 4, 2;
      }
      .graph-tooltip {
        position: absolute;
        background: rgba(30, 41, 59, 0.9);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 12px;
        pointer-events: none;
        top: 15px;
        left: 15px;
        opacity: 0;
        transition: opacity 0.2s;
        white-space: nowrap;
        z-index: 10;
      }
      .graph-tooltip span {
        display: block;
      }
      .tooltip-line {
        display: flex;
        align-items: center;
        gap: 6px;
      }
      .tooltip-color-box {
        width: 10px;
        height: 10px;
        border-radius: 2px;
      }
      .btn-predict {
        width: 100%;
        padding: 15px;
        background: linear-gradient(135deg, #7dd3fc 0%, #93c5fd 100%);
        color: #1e293b;
        border: none;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s;
      }
      .btn-predict:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(125, 211, 252, 0.4);
      }
      .results-section {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin-top: 20px;
        display: none;
      }
      .results-section.show {
        display: block;
      }
      .results-header {
        color: #1e293b;
        font-size: 18px;
        margin-bottom: 15px;
        font-weight: 600;
      }
      .result-item {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        background: #f8fafc;
        border-radius: 8px;
        margin-bottom: 10px;
      }
      .result-label {
        color: #64748b;
        font-size: 14px;
      }
      .result-value {
        color: #1e293b;
        font-weight: 600;
        font-size: 14px;
      }
      .team-section {
        background: white;
        border-radius: 15px;
        padding: 60px 40px;
      }
      .team-section h2 {
        font-size: 32px;
        margin-bottom: 10px;
        color: #1e293b;
        text-align: center;
      }
      .team-subtitle {
        text-align: center;
        color: #64748b;
        margin-bottom: 40px;
        font-size: 16px;
      }
      .team-grid {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 30px;
      }
      .team-member {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .profile-photo {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        overflow: hidden;
        margin-bottom: 15px;
        border: 4px solid #7dd3fc;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }
      .profile-photo img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .member-info {
        width: 100%;
      }
      .member-name {
        color: #1e293b;
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 12px;
      }
      .member-links {
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .social-link {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        background: #f8fafc;
        transition: all 0.3s;
        text-decoration: none;
      }
      .social-link.linkedin {
        color: #0077b5;
      }
      .social-link.github {
        color: #333;
      }
      .social-link.email {
        color: #7dd3fc;
      }
      .social-link:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
      .social-link.linkedin:hover {
        background: #0077b5;
        color: white;
      }
      .social-link.github:hover {
        background: #333;
        color: white;
      }
      .social-link.email:hover {
        background: #7dd3fc;
        color: white;
      }
      footer {
        background: linear-gradient(135deg, #7dd3fc 0%, #93c5fd 100%);
        padding: 20px;
        text-align: center;
        margin-top: 50px;
      }
      .footer-logo {
        display: inline-flex;
        flex-direction: column;
        font-weight: bold;
        color: #1e293b;
        line-height: 1.2;
        margin-bottom: 10px;
      }
      .hidden {
        display: none;
      }
      @media (max-width: 768px) {
        nav {
          display: none;
        }
        .hamburger {
          display: flex;
        }
        .hero h1 {
          font-size: 32px;
        }
        .input-grid {
          grid-template-columns: 1fr;
        }
        .team-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
        }
        .profile-photo {
          width: 100px;
          height: 100px;
        }
        .member-name {
          font-size: 14px;
        }
        .social-link {
          width: 32px;
          height: 32px;
        }
        .social-link svg {
          width: 16px;
          height: 16px;
        }
      }
      @media (max-width: 480px) {
        .team-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <header>
      <div class="logo">
        <span class="logo-will">WILL IT</span>
        <span class="logo-rain">RAIN</span>
      </div>
      <nav id="desktopNav">
        <a href="#" data-page="home">Home</a>
        <a href="#" data-page="about">About</a>
        <a href="#" data-page="contact">Contact Us</a>
      </nav>
      <div class="hamburger" id="hamburger">
        <span></span> <span></span> <span></span>
      </div>
    </header>
    <div class="mobile-menu" id="mobileMenu">
      <div class="mobile-menu-content">
        <div class="mobile-menu-close" id="closeMenu">‚úï</div>
        <a href="#" data-page="home">Home</a>
        <a href="#" data-page="about">About</a>
        <a href="#" data-page="contact">Contact Us</a>
      </div>
    </div>
    <main>
      <section id="homePage" class="page-content">
        <div class="hero">
          <div class="hero-content">
            <h1>WILL IT<br />RAIN?</h1>
            <p>Knows weather anytime, anywhere!</p>
            <button class="btn-primary" id="startPredicting">
              Start Predicting
            </button>
          </div>
        </div>
      </section>
      <section id="aboutPage" class="page-content hidden">
        <div class="about-section">
          <h2>About Will It Rain</h2>
          <p>
            Ever planned a picnic, a hike, or a simple walk, only to be caught
            in an unexpected downpour? Traditional weather forecasts give you
            the picture for a whole city, but weather can be dramatically
            different just a few kilometers away. We believed there had to be a
            better, more precise way.
          </p>
        </div>
      </section>
      <section id="mapsPage" class="page-content hidden">
        <div class="map-section">
          <button class="btn-location" onclick="getCurrentLocation()">
            üìç Use My Current Location
          </button>
          <div class="search-bar">
            <input
              type="text"
              id="searchInput"
              placeholder="Search location (e.g., Bandung, Indonesia)"
              value=""
            />
            <button onclick="searchLocation()">üîç Search</button>
          </div>
          <div id="map"></div>
          <div class="nasa-input-section">
            <div class="nasa-header">
              <h3>NASA Weather Parameters</h3>
              <span class="nasa-badge">NASA GIBS DATA</span>
            </div>
            <div class="input-grid">
              <div class="input-group">
                <label>üìÖ Start Date</label>
                <input type="date" id="nasaStartDate" />
              </div>
              <div class="input-group">
                <label>üìÖ End Date</label>
                <input type="date" id="nasaEndDate" />
              </div>
              <div class="input-group">
                <label>üåç Latitude</label>
                <input type="number" id="nasaLat" step="0.000001" readonly />
              </div>
              <div class="input-group">
                <label>üåç Longitude</label>
                <input type="number" id="nasaLon" step="0.000001" readonly />
              </div>
            </div>
            <div id="weatherGraphsContainer"></div>
            <button class="btn-predict" onclick="getWeatherPrediction()">
              üöÄ Analyze Weather & Predict
            </button>
          </div>
          <div class="results-section" id="resultsSection">
            <div class="results-header">üìä Prediction Results</div>
            <div id="resultsContent"></div>
          </div>
        </div>
      </section>
      <section id="contactPage" class="page-content hidden">
        <div class="team-section">
          <h2>Our Team</h2>
          <p class="team-subtitle">Meet the people behind Will It Rain</p>
          <div class="team-grid">
            <div class="team-member">
              <div class="profile-photo">
                <img
                  src="https://via.placeholder.com/150/7dd3fc/1e293b?text=Member+1"
                  alt="Team Member 1"
                />
              </div>
              <div class="member-info">
                <h3 class="member-name">Alexander Bagus Wijanarko</h3>
                <div class="member-links">
                  <a
                    href="https://linkedin.com/in/johndoe"
                    target="_blank"
                    class="social-link linkedin"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://github.com/johndoe"
                    target="_blank"
                    class="social-link github"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    href="mailto:john.doe@example.com"
                    class="social-link email"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div class="team-member">
              <div class="profile-photo">
                <img
                  src="https://via.placeholder.com/150/93c5fd/1e293b?text=Member+2"
                  alt="Team Member 2"
                />
              </div>
              <div class="member-info">
                <h3 class="member-name">Albert Nicholas Chandra</h3>
                <div class="member-links">
                  <a
                    href="https://linkedin.com/in/janesmith"
                    target="_blank"
                    class="social-link linkedin"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://github.com/janesmith"
                    target="_blank"
                    class="social-link github"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    href="mailto:jane.smith@example.com"
                    class="social-link email"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div class="team-member">
              <div class="profile-photo">
                <img
                  src="https://via.placeholder.com/150/94a3b8/1e293b?text=Member+3"
                  alt="Team Member 3"
                />
              </div>
              <div class="member-info">
                <h3 class="member-name">Anselmus William Putra Adji</h3>
                <div class="member-links">
                  <a
                    href="https://linkedin.com/in/mikejohnson"
                    target="_blank"
                    class="social-link linkedin"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://github.com/mikejohnson"
                    target="_blank"
                    class="social-link github"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    href="mailto:mike.johnson@example.com"
                    class="social-link email"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div class="team-member">
              <div class="profile-photo">
                <img
                  src="https://via.placeholder.com/150/64748b/ffffff?text=Member+4"
                  alt="Team Member 4"
                />
              </div>
              <div class="member-info">
                <h3 class="member-name">Michael Irvin Wartju</h3>
                <div class="member-links">
                  <a
                    href="https://linkedin.com/in/sarahwilliams"
                    target="_blank"
                    class="social-link linkedin"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://github.com/sarahwilliams"
                    target="_blank"
                    class="social-link github"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    href="mailto:sarah.williams@example.com"
                    class="social-link email"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div class="team-member">
              <div class="profile-photo">
                <img
                  src="https://via.placeholder.com/150/34d399/1e293b?text=Member+5"
                  alt="Team Member 5"
                />
              </div>
              <div class="member-info">
                <h3 class="member-name">Mikhael Filemon</h3>
                <div class="member-links">
                  <a
                    href="https://linkedin.com/in/alexbrown"
                    target="_blank"
                    class="social-link linkedin"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"
                      />
                    </svg>
                  </a>
                  <a
                    href="https://github.com/alexbrown"
                    target="_blank"
                    class="social-link github"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
                      />
                    </svg>
                  </a>
                  <a
                    href="mailto:alex.brown@example.com"
                    class="social-link email"
                  >
                    <svg
                      width="20"
                      height="20"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M0 3v18h24v-18h-24zm21.518 2l-9.518 7.713-9.518-7.713h19.036zm-19.518 14v-11.817l10 8.104 10-8.104v11.817h-20z"
                      />
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <div class="footer-logo">
        <span class="logo-will">WILL IT</span>
        <span class="logo-rain">RAIN</span>
      </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
      let map,
        marker,
        rangeDataCache = [];
      let currentLat = -6.9024942,
        currentLng = 107.5607453;

      const startDateInput = document.getElementById("nasaStartDate");
      const endDateInput = document.getElementById("nasaEndDate");

      function formatDate(date) {
        return date.toISOString().split("T")[0];
      }

      function setupDatePickers() {
        const today = new Date("2025-10-05T17:05:38");
        const weekAgo = new Date(today);
        weekAgo.setDate(today.getDate() - 6);

        endDateInput.value = formatDate(today);
        startDateInput.value = formatDate(weekAgo);

        const handleDateChange = () => {
          const start = new Date(startDateInput.value);
          const end = new Date(endDateInput.value);
          if (end < start) {
            startDateInput.value = endDateInput.value;
          }
          const diffTime = Math.abs(end - start);
          const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
          if (diffDays > 13) {
            // Max 14 days range
            alert("Please select a date range of 14 days or less.");
            const newStart = new Date(end);
            newStart.setDate(end.getDate() - 13);
            startDateInput.value = formatDate(newStart);
          }
          getWeatherPrediction();
        };

        startDateInput.addEventListener("change", handleDateChange);
        endDateInput.addEventListener("change", handleDateChange);
      }
      setupDatePickers();

      const pages = {
        home: document.getElementById("homePage"),
        about: document.getElementById("aboutPage"),
        maps: document.getElementById("mapsPage"),
        contact: document.getElementById("contactPage"),
      };
      function showPage(pageName) {
        Object.values(pages).forEach((page) => page.classList.add("hidden"));
        if (pages[pageName]) {
          pages[pageName].classList.remove("hidden");
          if (pageName === "maps" && !map) {
            setTimeout(() => initMap(), 100);
          }
        }
      }
      document
        .querySelectorAll("#desktopNav a, .mobile-menu a")
        .forEach((link) => {
          link.addEventListener("click", (e) => {
            e.preventDefault();
            showPage(e.target.dataset.page);
            document.getElementById("mobileMenu").classList.remove("active");
          });
        });
      document
        .getElementById("hamburger")
        .addEventListener("click", () =>
          document.getElementById("mobileMenu").classList.add("active")
        );
      document
        .getElementById("closeMenu")
        .addEventListener("click", () =>
          document.getElementById("mobileMenu").classList.remove("active")
        );
      document
        .getElementById("startPredicting")
        .addEventListener("click", () => showPage("maps"));

      function initMap() {
        map = L.map("map").setView([currentLat, currentLng], 13);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
          attribution: "¬© OpenStreetMap contributors",
          maxZoom: 19,
        }).addTo(map);
        marker = L.marker([currentLat, currentLng], { draggable: true })
          .addTo(map)
          .bindPopup("<b>Selected Location</b>")
          .openPopup();
        marker.on("dragend", (e) =>
          updateLocationInfo(e.target.getLatLng().lat, e.target.getLatLng().lng)
        );
        map.on("click", (e) => {
          marker.setLatLng(e.latlng);
          updateLocationInfo(e.latlng.lat, e.latlng.lng);
        });
        updateLocationInfo(currentLat, currentLng);
      }
      function getCurrentLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition((position) => {
            const { latitude: lat, longitude: lng } = position.coords;
            map.setView([lat, lng], 14);
            marker.setLatLng([lat, lng]);
            updateLocationInfo(lat, lng);
          });
        } else {
          alert("Geolocation is not supported by your browser.");
        }
      }
      async function searchLocation() {
        const query = document.getElementById("searchInput").value;
        if (!query) return;
        try {
          const response = await fetch(
            `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(
              query
            )}`
          );
          const data = await response.json();
          if (data && data.length > 0) {
            const lat = parseFloat(data[0].lat);
            const lng = parseFloat(data[0].lon);
            map.setView([lat, lng], 13);
            marker.setLatLng([lat, lng]);
            updateLocationInfo(lat, lng);
          } else {
            alert("Location not found.");
          }
        } catch (error) {
          console.error("Search error:", error);
        }
      }
      function updateLocationInfo(lat, lng) {
        currentLat = lat;
        currentLng = lng;
        document.getElementById("nasaLat").value = lat.toFixed(7);
        document.getElementById("nasaLon").value = lng.toFixed(7);
      }
      document
        .getElementById("searchInput")
        .addEventListener("keypress", (e) => {
          if (e.key === "Enter") searchLocation();
        });

      async function fetchDataForDateRange(startDateStr, endDateStr) {
        const allData = [
          {
            date: "2025-09-22",
            temperature: { min: 21, avg: 25, max: 29 },
            windSpeed: { min: 8, avg: 14, max: 22 },
            humidity: { min: 68, avg: 75, max: 82 },
            precipProb: { min: 10, avg: 20, max: 30 },
            uvIndex: { min: 6, avg: 8, max: 9 },
          },
          {
            date: "2025-09-23",
            temperature: { min: 22, avg: 26, max: 30 },
            windSpeed: { min: 7, avg: 12, max: 19 },
            humidity: { min: 70, avg: 78, max: 85 },
            precipProb: { min: 15, avg: 25, max: 40 },
            uvIndex: { min: 5, avg: 7, max: 8 },
          },
          {
            date: "2025-09-24",
            temperature: { min: 22, avg: 25, max: 28 },
            windSpeed: { min: 10, avg: 16, max: 25 },
            humidity: { min: 75, avg: 82, max: 90 },
            precipProb: { min: 30, avg: 45, max: 60 },
            uvIndex: { min: 4, avg: 6, max: 7 },
          },
          {
            date: "2025-09-25",
            temperature: { min: 21, avg: 24, max: 27 },
            windSpeed: { min: 12, avg: 18, max: 28 },
            humidity: { min: 80, avg: 88, max: 95 },
            precipProb: { min: 50, avg: 70, max: 85 },
            uvIndex: { min: 2, avg: 4, max: 5 },
          },
          {
            date: "2025-09-26",
            temperature: { min: 21, avg: 24, max: 28 },
            windSpeed: { min: 15, avg: 22, max: 35 },
            humidity: { min: 82, avg: 90, max: 98 },
            precipProb: { min: 60, avg: 85, max: 95 },
            uvIndex: { min: 1, avg: 3, max: 4 },
          },
          {
            date: "2025-09-27",
            temperature: { min: 22, avg: 26, max: 30 },
            windSpeed: { min: 10, avg: 15, max: 24 },
            humidity: { min: 78, avg: 85, max: 92 },
            precipProb: { min: 40, avg: 60, max: 75 },
            uvIndex: { min: 3, avg: 5, max: 6 },
          },
          {
            date: "2025-09-28",
            temperature: { min: 23, avg: 27, max: 31 },
            windSpeed: { min: 8, avg: 13, max: 20 },
            humidity: { min: 72, avg: 80, max: 88 },
            precipProb: { min: 20, avg: 35, max: 50 },
            uvIndex: { min: 5, avg: 7, max: 8 },
          },
          {
            date: "2025-09-29",
            temperature: { min: 23, avg: 28, max: 32 },
            windSpeed: { min: 6, avg: 12, max: 18 },
            humidity: { min: 65, avg: 75, max: 85 },
            precipProb: { min: 10, avg: 20, max: 30 },
            uvIndex: { min: 7, avg: 8, max: 10 },
          },
          {
            date: "2025-09-30",
            temperature: { min: 22, avg: 26, max: 30 },
            windSpeed: { min: 9, avg: 15, max: 25 },
            humidity: { min: 70, avg: 82, max: 90 },
            precipProb: { min: 20, avg: 45, max: 65 },
            uvIndex: { min: 5, avg: 6, max: 8 },
          },
          {
            date: "2025-10-01",
            temperature: { min: 21, avg: 25, max: 28 },
            windSpeed: { min: 11, avg: 18, max: 29 },
            humidity: { min: 78, avg: 88, max: 96 },
            precipProb: { min: 40, avg: 75, max: 90 },
            uvIndex: { min: 3, avg: 4, max: 6 },
          },
          {
            date: "2025-10-02",
            temperature: { min: 21, avg: 24, max: 27 },
            windSpeed: { min: 14, avg: 22, max: 34 },
            humidity: { min: 85, avg: 92, max: 98 },
            precipProb: { min: 70, avg: 85, max: 95 },
            uvIndex: { min: 2, avg: 3, max: 4 },
          },
          {
            date: "2025-10-03",
            temperature: { min: 22, avg: 25, max: 29 },
            windSpeed: { min: 10, avg: 16, max: 26 },
            humidity: { min: 80, avg: 85, max: 94 },
            precipProb: { min: 50, avg: 60, max: 80 },
            uvIndex: { min: 4, avg: 5, max: 7 },
          },
          {
            date: "2025-10-04",
            temperature: { min: 22, avg: 26, max: 31 },
            windSpeed: { min: 7, avg: 11, max: 19 },
            humidity: { min: 75, avg: 78, max: 88 },
            precipProb: { min: 25, avg: 30, max: 50 },
            uvIndex: { min: 6, avg: 7, max: 9 },
          },
          {
            date: "2025-10-05",
            temperature: { min: 23, avg: 27, max: 32 },
            windSpeed: { min: 8, avg: 14, max: 21 },
            humidity: { min: 72, avg: 80, max: 89 },
            precipProb: { min: 30, avg: 55, max: 70 },
            uvIndex: { min: 5, avg: 6, max: 8 },
          },
        ];

        const start = new Date(startDateStr);
        const end = new Date(endDateStr);
        const result = allData.filter((d) => {
          const date = new Date(d.date);
          return date >= start && date <= end;
        });
        return Promise.resolve(result);
      }

      function displayRangeCharts(rangeData, selectedDate) {
        const container = document.getElementById("weatherGraphsContainer");
        container.innerHTML = "";

        const parameters = [
          {
            key: "temperature",
            title: "Temperature (¬∞C)",
            unit: "¬∞C",
            colors: {
              min: "var(--color-temp-min)",
              avg: "var(--color-temp-avg)",
              max: "var(--color-temp-max)",
            },
            lines: {
              min: "var(--color-temp-min-line)",
              avg: "var(--color-temp-avg-line)",
              max: "var(--color-temp-max-line)",
            },
          },
          {
            key: "windSpeed",
            title: "Wind Speed (km/h)",
            unit: " km/h",
            colors: {
              min: "var(--color-wind-min)",
              avg: "var(--color-wind-avg)",
              max: "var(--color-wind-max)",
            },
            lines: {
              min: "var(--color-wind-min-line)",
              avg: "var(--color-wind-avg-line)",
              max: "var(--color-wind-max-line)",
            },
          },
          {
            key: "humidity",
            title: "Humidity (%)",
            unit: "%",
            colors: {
              min: "var(--color-humidity-min)",
              avg: "var(--color-humidity-avg)",
              max: "var(--color-humidity-max)",
            },
            lines: {
              min: "var(--color-humidity-min-line)",
              avg: "var(--color-humidity-avg-line)",
              max: "var(--color-humidity-max-line)",
            },
          },
          {
            key: "precipProb",
            title: "Precipitation Prob. (%)",
            unit: "%",
            colors: {
              min: "var(--color-precip-min)",
              avg: "var(--color-precip-avg)",
              max: "var(--color-precip-max)",
            },
            lines: {
              min: "var(--color-precip-min-line)",
              avg: "var(--color-precip-avg-line)",
              max: "var(--color-precip-max-line)",
            },
          },
          {
            key: "uvIndex",
            title: "UV Index",
            unit: "",
            colors: {
              min: "var(--color-uv-min)",
              avg: "var(--color-uv-avg)",
              max: "var(--color-uv-max)",
            },
            lines: {
              min: "var(--color-uv-min-line)",
              avg: "var(--color-uv-avg-line)",
              max: "var(--color-uv-max-line)",
            },
          },
        ];

        rangeData.forEach((day, index) => (day.index = index));
        const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];

        parameters.forEach((param) => {
          const allValues = rangeData.flatMap((day) => [
            day[param.key].min,
            day[param.key].avg,
            day[param.key].max,
          ]);
          const overallMin = Math.min(...allValues);
          const overallMax = Math.max(...allValues);
          const valueRange = overallMax - overallMin;

          const svgWidth = 320,
            svgHeight = 160;
          const p = { top: 10, right: 10, bottom: 30, left: 35 };

          const getCoords = (value, index) => {
            const x =
              p.left +
              (index / (rangeData.length - 1)) * (svgWidth - p.left - p.right);
            let y = svgHeight - p.bottom;
            if (valueRange > 0) {
              y =
                svgHeight -
                p.bottom -
                ((value - overallMin) / valueRange) *
                  (svgHeight - p.top - p.bottom);
            }
            return { x, y };
          };

          const buildPath = (key) =>
            "M" +
            rangeData
              .map((day, i) => {
                const { x, y } = getCoords(day[param.key][key], i);
                return `${x},${y}`;
              })
              .join(" L ");
          const buildArea = (key1, key2) => {
            const topPoints = rangeData.map((d, i) =>
              getCoords(d[param.key][key1], i)
            );
            const bottomPoints = rangeData
              .map((d, i) => getCoords(d[param.key][key2], i))
              .reverse();
            return (
              "M" +
              topPoints.map((p) => `${p.x},${p.y}`).join(" L ") +
              " L" +
              bottomPoints.map((p) => `${p.x},${p.y}`).join(" L ") +
              " Z"
            );
          };

          let yAxisHTML = "",
            xAxisHTML = "";
          for (let i = 0; i <= 4; i++) {
            const y =
              svgHeight - p.bottom - (i / 4) * (svgHeight - p.top - p.bottom);
            const value = Math.round(overallMin + (i / 4) * valueRange);
            yAxisHTML += `<line x1="${p.left}" y1="${y}" x2="${
              svgWidth - p.right
            }" y2="${y}" class="grid-line" /><text x="${p.left - 5}" y="${
              y + 3
            }" class="axis-label" text-anchor="end">${value}</text>`;
          }
          rangeData.forEach((day, i) => {
            const { x } = getCoords(0, i);
            const dayName = dayNames[new Date(day.date + "T00:00:00").getDay()];
            xAxisHTML += `<text x="${x}" y="${
              svgHeight - p.bottom + 15
            }" class="axis-label" text-anchor="middle">${dayName}</text>`;
          });

          const graphHTML = `
                <div class="weather-graph" id="graph-${param.key}">
                    <div class="graph-title">${param.title}</div>
                    <div class="graph-tooltip" id="tooltip-${param.key}"></div>
                    <svg viewBox="0 0 ${svgWidth} ${svgHeight}" class="chart-svg" aria-label="${
            param.title
          }">
                        <g class="grid-and-axis">${yAxisHTML}${xAxisHTML}</g>
                        <path class="area-path" d="${buildArea(
                          "max",
                          "avg"
                        )}" style="fill:${param.colors.max};"></path>
                        <path class="area-path" d="${buildArea(
                          "avg",
                          "min"
                        )}" style="fill:${param.colors.avg};"></path>
                        <path class="line-path" d="${buildPath(
                          "max"
                        )}" style="stroke:${param.lines.max};"></path>
                        <path class="line-path" d="${buildPath(
                          "avg"
                        )}" style="stroke:${param.lines.avg};"></path>
                        <path class="line-path" d="${buildPath(
                          "min"
                        )}" style="stroke:${param.lines.min};"></path>
                        <line class="tracker-line" id="tracker-${
                          param.key
                        }" y1="${p.top}" y2="${
            svgHeight - p.bottom
          }" style="opacity:0;"></line>
                        <line class="tracker-line" id="selected-day-line-${
                          param.key
                        }" y1="${p.top}" y2="${
            svgHeight - p.bottom
          }" style="stroke-width:1.5; stroke:#1e293b;"></line>
                    </svg>
                </div>`;
          container.insertAdjacentHTML("beforeend", graphHTML);

          // Add interactivity listeners
          const graphEl = document.getElementById(`graph-${param.key}`);
          const svgEl = graphEl.querySelector(".chart-svg");
          const tooltipEl = document.getElementById(`tooltip-${param.key}`);
          const trackerEl = document.getElementById(`tracker-${param.key}`);

          svgEl.addEventListener("mousemove", (e) => {
            const rect = svgEl.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            const dayIndex = Math.round(
              ((mouseX - p.left) / (svgWidth - p.left - p.right)) *
                (rangeData.length - 1)
            );

            if (dayIndex >= 0 && dayIndex < rangeData.length) {
              const dayData = rangeData[dayIndex];
              const { x } = getCoords(0, dayIndex);
              trackerEl.setAttribute("x1", x);
              trackerEl.setAttribute("x2", x);
              trackerEl.style.opacity = "1";

              tooltipEl.style.opacity = "1";
              tooltipEl.style.left = `${e.clientX - rect.left + 15}px`;
              tooltipEl.style.top = `${e.clientY - rect.top}px`;
              tooltipEl.innerHTML = `<strong>${dayData.date}</strong>
                        <div class="tooltip-line"><div class="tooltip-color-box" style="background:${
                          param.lines.max
                        };"></div>Max: ${dayData[param.key].max}${
                param.unit
              }</div>
                        <div class="tooltip-line"><div class="tooltip-color-box" style="background:${
                          param.lines.avg
                        };"></div>Avg: ${dayData[param.key].avg}${
                param.unit
              }</div>
                        <div class="tooltip-line"><div class="tooltip-color-box" style="background:${
                          param.lines.min
                        };"></div>Min: ${dayData[param.key].min}${
                param.unit
              }</div>
                    `;
            }
          });
          svgEl.addEventListener("mouseleave", () => {
            trackerEl.style.opacity = "0";
            tooltipEl.style.opacity = "0";
          });
          const selectedDayIndex = rangeData.findIndex(
            (d) => d.date === selectedDate
          );
          if (selectedDayIndex !== -1) {
            const { x } = getCoords(0, selectedDayIndex);
            document
              .getElementById(`selected-day-line-${param.key}`)
              .setAttribute("x1", x);
            document
              .getElementById(`selected-day-line-${param.key}`)
              .setAttribute("x2", x);
          }
        });
      }

      async function getWeatherPrediction() {
        document.getElementById("resultsSection").classList.remove("show");
        document.getElementById("weatherGraphsContainer").innerHTML =
          '<p style="text-align: center; padding: 20px;">Analyzing data for the selected range...</p>';

        rangeDataCache = await fetchDataForDateRange(
          startDateInput.value,
          endDateInput.value
        );
        if (rangeDataCache.length === 0) {
          document.getElementById("weatherGraphsContainer").innerHTML =
            '<p style="text-align: center; padding: 20px;">No data available for this date range.</p>';
          return;
        }

        const selectedDate = endDateInput.value;
        displayRangeCharts(rangeDataCache, selectedDate);
        updatePredictionForDay(selectedDate);
      }

      function updatePredictionForDay(dateString) {
        if (!rangeDataCache.length) return;
        const dayData = rangeDataCache.find((d) => d.date === dateString);
        if (!dayData) {
          console.error("No data for date:", dateString);
          return;
        }

        let prediction, confidence, conditions;
        if (dayData.temperature.avg > 28 && dayData.precipProb.avg < 30) {
          prediction = "Hot and Sunny";
          confidence = "90%";
          conditions = `High UV Index of ${dayData.uvIndex.avg}. Stay hydrated.`;
        } else if (dayData.precipProb.avg > 75) {
          prediction = "Heavy Rain";
          confidence = "88%";
          conditions = `High chance of precipitation with moderate winds.`;
        } else if (dayData.precipProb.avg > 40) {
          prediction = "Scattered Showers";
          confidence = "70%";
          conditions = `Cloudy with an average humidity of ${dayData.humidity.avg}%.`;
        } else {
          prediction = "Partly Cloudy";
          confidence = "85%";
          conditions = "Pleasant weather with mild temperatures.";
        }

        displayPredictionResults({
          prediction,
          confidence,
          date: dateString,
          conditions,
        });
      }

      function displayPredictionResults(data) {
        document.getElementById(
          "resultsHeader"
        ).textContent = `üìä Prediction Results for ${data.date}`;
        const resultsContent = document.getElementById("resultsContent");
        resultsContent.innerHTML = `
          <div class="result-item"> <span class="result-label">Prediction:</span> <span class="result-value">${
            data.prediction || "N/A"
          }</span> </div>
          <div class="result-item"> <span class="result-label">Confidence:</span> <span class="result-value">${
            data.confidence || "N/A"
          }</span> </div>
          <div class="result-item"> <span class="result-label">Conditions:</span> <span class="result-value">${
            data.conditions || "N/A"
          }</span> </div>
        `;
        document.getElementById("resultsSection").classList.add("show");
      }
    </script>
  </body>
</html>
